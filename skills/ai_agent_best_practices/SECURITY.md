# AI代理技能安全最佳实践

## 安全原则

### 1. 最小权限原则
- 技能只应拥有完成其功能所需的最少权限
- 定期审查和更新权限设置
- 避免使用管理员或超级用户权限运行技能

### 2. 深度防御
- 在多个层面实施安全措施
- 不要依赖单一的安全控制
- 包括网络、主机、应用和数据层的安全措施

### 3. 故障安全
- 系统在发生故障时应进入安全状态
- 默认情况下拒绝访问
- 确保错误不会泄露敏感信息

## 输入验证和过滤

### 1. 参数验证
- 验证所有输入参数的数据类型、长度和格式
- 使用白名单而非黑名单进行验证
- 对特殊字符进行适当的转义或过滤

### 2. 内容过滤
- 过滤可能的恶意内容
- 验证URL、文件路径和其他引用的有效性
- 实施内容安全策略

## 输出编码

### 1. 数据输出
- 对输出数据进行适当编码以防止注入攻击
- 根据目标系统的要求格式化数据
- 避免直接输出未经处理的用户输入

### 2. 错误信息
- 不要在错误消息中泄露系统内部信息
- 提供用户友好的错误描述
- 记录详细错误信息用于调试（但不显示给用户）

## 认证和授权

### 1. 身份验证
- 实施强身份验证机制
- 使用多因素认证（如适用）
- 定期轮换认证凭据

### 2. 授权检查
- 验证用户是否有权执行特定操作
- 实施基于角色的访问控制（RBAC）
- 记录授权决策

## 数据保护

### 1. 加密
- 在传输过程中使用TLS/SSL加密
- 对静态敏感数据进行加密
- 使用行业标准加密算法

### 2. 数据生命周期管理
- 实施数据分类策略
- 定义数据保留期限
- 安全地销毁不再需要的数据

## 监控和日志记录

### 1. 安全日志
- 记录所有安全相关事件
- 包括登录尝试、权限更改和异常活动
- 保护日志文件不被篡改

### 2. 异常检测
- 实施实时监控系统
- 设置阈值以检测异常行为
- 配置自动警报机制

## 应急响应

### 1. 事件响应计划
- 制定安全事件响应程序
- 定义角色和责任
- 定期演练应急响应程序

### 2. 修复和恢复
- 快速隔离受影响系统
- 评估损害程度
- 实施补救措施并恢复正常操作